<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galeria de Pinturas</title>
    <link href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" rel="stylesheet">
    <link href="./css/Obras.css" rel="stylesheet">
    <link href="./css/footer.css" rel="stylesheet">
    <link href="./css/global.css" rel="stylesheet">
    <link href="./css/globalPC.css" rel="stylesheet">
    <link href="./css/header.css" rel="stylesheet">
    <link href="./css/headerPC.css" rel="stylesheet">
    <link href="./css/menu.css" rel="stylesheet">
</head>
<body>
<section class="telasPequenas">
    <%- include("../partial/header") %>
    <article class="Mobile">
        <section>
            <main style="margin-top: 2rem;">
                <div class="ObraPrincipalMobile">
                    <div class="ImagemOPMobile">
                        <figure>
                            <img class="ObraPrincipalMobile" src="./images/ObraPrincipal.webp" alt="Obra o gato do artista romero britto">
                        </figure>
                    </div>
                    <div class="TextoOPMobile">
                        <p>O gato é uma das obras mais famosas do artista plástico brasileiro.</p>
                    </div>
                    <div class="BotoesCompraMobile">
                        <h1 class="ValorOPMobile">R$ XXX,XX</h1>
                        <button class="ComprarObraMobile">Comprar</button>
                        <button class="AddCarrinhoMobile">Adicionar</button>
                    </div>
                </div>
                <br>
                <div class="gallery-container-mobile" id="galleryMobile">
                    <!-- Gerar dinamicamente as obras com EJS -->
                    <% obras.forEach(function(obra) { %>
                    <div class="painting-mobile">
                        <img src="uploads/obras/<%= obra.imagem_obra %>" alt="<%= obra.titulo_obra %>">
                        <div class="painting-title-mobile"><%= obra.titulo_obra %></div>
                        <div class="painting-description-mobile"><%= obra.descricao_obra %></div>
                        <div class="painting-price-mobile"><%= obra.preco %></div>
                    </div>
                    <% }) %>
    
                    <!-- Paginação para mobile -->
                    <div class="pagination-mobile">
                        <a id="prevMobile" href="javascript:void(0)" onclick="changePage(-1)">&#60;</a>
                        <span id="page-info-mobile">1/<%= Math.ceil(obras.length / 2) %></span>
                        <a id="nextMobile" href="javascript:void(0)" onclick="changePage(1)">&#62;</a>
                    </div>
                </div>
            </main>
        </section>
    </article>
</section>

<!-- Header para telas grandes -->
<section class="telasGrandes">
    <%- include("../partial/headerPC") %>
    <article class="Desktop">
        <section>
            <main style="margin-top: 5rem;">
                <div class="ObraPrincipal">
                    <div class="ImagemOP">
                        <figure>
                            <img class="ObraPrincipal" src="./images/ObraPrincipal.webp" alt="Obra o gato do artista romero britto">
                        </figure>
                    </div>
                    <div class="TextoOP">
                        <p>O gato é uma das obras mais famosas do artista plástico brasileiro.</p>
                    </div>
                    <div class="BotoesCompra">
                        <h1 class="ValorOP">R$ XXX,XX</h1>
                        <button class="ComprarObra">Comprar</button>
                        <button class="AddCarrinho">Adicionar</button>
                    </div>
                </div>
                <br>
                <div class="gallery-container" id="gallery">
                    <!-- Gerar dinamicamente as obras com EJS -->
                    <% obras.forEach(function(obra) { %>
                    <div class="painting">
                        <img src="uploads/obras/<%= obra.imagem_obra %>" alt="<%= obra.titulo_obra %>">
                        <div class="painting-title"><%= obra.titulo_obra %></div>
                        <div class="painting-description"><%= obra.descricao_obra %></div>
                        <div class="painting-price"><%= obra.preco %></div>
                    </div>
                    <% }) %>

                    <!-- Paginação -->
                    <div class="pagination">
                        <a id="prev" href="javascript:void(0)" onclick="changePage(-1)">&#60;</a>
                        <span id="page-info">1/<%= Math.ceil(obras.length / 4) %></span>
                        <a id="next" href="javascript:void(0)" onclick="changePage(1)">&#62;</a>
                    </div>
                </div>
            </main>
        </section>
    </article>
</section>

        
<%- include("../partial/footer") %>



    <script>
        let currentPage = 1;
        const itemsPerPage = 4;
        const paintings = document.querySelectorAll('.painting');
        const totalPages = Math.ceil(paintings.length / itemsPerPage);

        function updateGallery() {
            const start = (currentPage - 1) * itemsPerPage;
            const end = start + itemsPerPage;

            paintings.forEach((painting, index) => {
                painting.style.display = (index >= start && index < end) ? 'inline-block' : 'none';
            });

            document.getElementById('page-info').textContent = `${currentPage}/${totalPages}`;
        }

        function changePage(direction) {
            currentPage += direction;
            if (currentPage < 1) currentPage = 1;
            if (currentPage > totalPages) currentPage = totalPages;
            updateGallery();
        }

        updateGallery();
    </script>
</body>
</html>
